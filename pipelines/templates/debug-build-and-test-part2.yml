steps:
  - task: Bash@3
    displayName: Wait for Emulator
    inputs:
      filePath: 'pipelines/templates/android-emulator-wait.sh'
    condition: succeededOrFailed()

  - task: Gradle@2
    displayName: Run Android Tests
    inputs:
      tasks: 'connectedCheck'
      gradleWrapperFile: 'gradlew'
      publishJUnitResults: true
      testResultsFiles: '**/TEST-*-.xml'
      testRunTitle: 'Android Tests'
    condition: succeededOrFailed()